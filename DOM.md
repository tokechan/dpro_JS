# DOM
Document Object Modelの略で、HTMLの要素をオブジェクトとして扱う仕組みである。
ブラウザオブジェクトの中のDocumentオブジェクトを使用してDOM操作（ドキュメントの操作）を行う。

## DOMツリーとは
Webページをブラウザが読み込むと、HTML文書が解析される。
その解析された文書から、Documentオブジェクトのなかにその内容を示す各要素のオブジェクトが構築される。
これらのHTML要素オブジェクトの集まりを、JSからHTML操作をするためのインターフェースとして
DOM（Document Object Model）と呼ぶ。
DOMはブラウザがJSからHTMLを操作するのAPIとしてJSに提供しているもの。
DOMはDocumentオブジェクトを先頭にHTMLの要素をツリー状に表したものである。
そのため、全体を指してDOMツリーと呼ぶ。

DOMツリーを構成する一つ一つの要素をノードと呼ぶ
- ドキュメントノード
　HTML文書全体を表すオブジェクト（Documentオブジェクト）
- 要素ノード
　HTMLの要素を表すオブジェクト（Elementオブジェクト）
- テキストノード
　HTMLのテキストを表すオブジェクト（Textオブジェクト）
　DOMツリーでは、要素の前後に連続した空白文字があると、空白ノードとしてテキストのーどが生成される。

HTML文書の親子関係と同様に、DOMツリーでも親子関係が存在する。
ここのHTMLだと
<body>ノードは<div>ノードの親であり、<div>ノード以下のノードは<body>ノードの子孫ノードでとなる。
また、並列の関係である<h1>ノードと<p>ノードは兄弟ノードであると言えます。
Documentオブジェクトはすべてのノードの祖先ノードであり、DOMツリーのルートです。

## ノードを取得するさまざまなメソッド

### getElementById()
指定したid属性を持つ要素ノードを取得するメソッド
ひとつのHTML文書の中に同じidは存在しないため、指定したid属性を持つ要素ノードは一つだけである。
そのため、メソッド名の末尾にsがつかない。
例：getElementById("id名")

### getElementsByTagName()
指定したタグ名を持つ要素ノードを取得するメソッド

### getElementsByClassName()
指定したクラス名を持つ要素ノードを取得するメソッド

## WebブラウザにおけるJSの処理の流れ
1. HTML文書をブラウザが読み込みwebページを表示する
2. Windowオブジェクトが生成される
3. Documentオブジェクトが生成され、DOMツリーを構築しようとする
4. HTML文書の記述順に解析され、Documentオブジェクトに要素ノードやテキストノードが追加されていく
5. HTML文書の中にscript要素があった場合、そのコードを実行する（実行中、HTML文書の解析は中断され、JSの実行完了後に再開）
6. DOMツリーの構築完了
7. 画像ファイルなどの読み込み
8. Windowオブジェクトにloadイベントを発生させる

## scriptタグのasync属性/defer属性
scriptタグでJSのプログラムを動かす場合、HTML文書の解析は中断されてしまう。
そこで、HTML5から新しく<script>タグにasync属性とdefer属性が追加された。
src属性で外部のJSファイルを読み込む時にのみ有効。

### async属性
非同期読み込みを行う属性。
HTML文書の解析を中断せずに、JSの読み込みと実行を行う。
解析順に実行するため実行順序は保証されない

### defer属性
遅延読み込みを行う属性。
DOMツリーを構築した後に<script>タグのコードが実行される。
HTML文書の解析を中断せずに、JSの読み込みを行う。

## まとめ
- Documentオブジェクトの中に構築されるHTML要素オブジェクトの集まりをDOMと呼ぶ。DOMは、ブラウザがJavaScriptからHTMLを操作するためのAPIとして提供しているものである。
- DOMツリーを構築する一つ一つの要素をノードと呼び、HTMLと同様に親子関係がある。
- DocumentオブジェクトのメソッドであるgetElementById()メソッドや、getElementsByTagName()メソッドを使用して、ノードを取得して操作できる。
